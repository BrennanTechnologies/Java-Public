
import java.util.Scanner;
import java.util.Random;
//import java.util.ArrayList;
//import java.util.Arrays;


/**
TOP:

// Display Welcome:
System.out.println("Welcome to the 'Shut the Box' Game.");

boolean playAgain = true;
while (playAgain = true )}                                         //    newRound( WHILE playAgain = true ));
    round++ 

    System.out.println("Begin playing game #" + game + ".");

    setSeed:
    Enter a seed:

    newRound <Start Loop> {
        showBoard:
        The available number(s) are: 1 2 3 4 5 6 7 8 9 

        rollDice:
        The dice roll is 6 and 3 for a sum of 9.

        The ShutTheBox_HelperClass binary
        boolean continuePlaying =  true

        closeTiles:
        Which tile(s) should be "closed"? Separate multiple tiles with a space.

        checkTiles:
        The following tiles are closed: 1 2 4 5 6 7

        showBoard:
        The available number(s) are: 1 2 4 5 6 7 

        rollDice:
        The dice roll is 3 and 5 for a sum of 8.

        The ShutTheBox_HelperClass binary
        boolean continuePlaying =  true

        closeTiles:
        Which tile(s) should be "closed"? Separate multiple tiles with a space.The dice roll is 3 and 5 for a sum of 8.

        checkTiles:
        The following tiles are closed: 1 2 4 5 6 7

        showBoard:
        The available number(s) are: 2 4 5 6 

            if (7, 8, and 9 are "closed")                               // checkTiles

                checkTiles: if (7, 8, and 9 are "closed") {
                The player may opt to roll 1 die or 2 dice because tiles 7, 8, and 9 are "closed".
                Enter "1" to roll 1 only die or "2" (or any other key) to roll 2 dice.

                rollDice:
                The dice roll is 1 and 3 for a sum of 4.

                The ShutTheBox_HelperClass binary
                boolean continuePlaying =  true

                closeTiles: 
                Which tile(s) should be "closed"? Separate multiple tiles with a space.

                checkTiles:
                The following tiles are closed: 1 2 4 5 6 7

                showBoard:
                The available number(s) are: 2 5 6 

                The player may opt to roll 1 die or 2 dice because tiles 7, 8, and 9 are "closed".
                Enter "1" to roll 1 only die or "2" (or any other key) to roll 2 dice.

                rollDice:
                The die roll is 2.

                The ShutTheBox_HelperClass binary
                boolean continuePlaying =  true

                closeTiles:
                Which tile(s) should be "closed"? Separate multiple tiles with a space.

                checkTiles:
                The following tiles are closed: 1 2 4 5 6 7

                showBoard:
                The available number(s) are: 5 6 

                The player may opt to roll 1 die or 2 dice because tiles 7, 8, and 9 are "closed".
                Enter "1" to roll 1 only die or "2" (or any other key) to roll 2 dice.

                rollDice:
                The dice roll is 4 and 2 for a sum of 6.

                The ShutTheBox_HelperClass binary
                boolean continuePlaying =  true

                closeTiles:
                Which tile(s) should be "closed"? Separate multiple tiles with a space.

                checkTiles:
                The following tiles are closed: 1 2 4 5 6 7

                showBoard:
                The available number(s) are: 5 

                The player may opt to roll 1 die or 2 dice because tiles 7, 8, and 9 are "closed".
                Enter "1" to roll 1 only die or "2" (or any other key) to roll 2 dice.

                rollDice:
                The die roll is 5.

                The ShutTheBox_HelperClass binary 

                closeTiles:
                Which tile(s) should be "closed"? Separate multiple tiles with a space.

                checkTiles:
                The following tiles are closed: 1 2 4 5 6 7
            } // End round                                          // <END LOOP> round

            // Display Game Over:
            showBoard:                                              SHOW BOARD:
            if (tiles[0-8] = FALSE) {}
                wins++
                Congratulations, you won!                               ///// win /////
            } 
        }
        Ask: playAgain?
        if (playAgain = true) {
            newRound:
        }
        <Bottom Loop> playAgain While (playAgain.ToUpper() != "NO") {
        rounds++
    }

    Do you wish to play again? Enter "No" to play again or anything else to quit.
   - No
}

<end playAgain Loop>
Thank you for playing "Close the Box"! The total score is 0 with 1 win(s) after 1 round(s).


*/

public class ShutTheBox {
    public static void main(String[] args) {
        // 1. Initialize: Initialize the match variables.
        int score  = 0;
        int wins   = 0;
        int rounds = 0;

        // Istantiate Objects:
        Scanner scanner = new Scanner(System.in);
        Random random = new Random();

        // Display the welcome message.
        System.out.println("Welcome to the 'Shut the Box' Game.\n");

        // Outer-Loop: Play Again?
        boolean playGame = true;
        while ( playGame = true ) {                                                     //    <OUTER-LOOP> newRound( WHILE playAgain = true ));

            // A. Initialize the game variables. 
            //      - Begin playing game #1.
            int round = 0; 
            round++; 
            System.out.println("Begin playing game #" + round + ".");

            // B. Get the seed.
            setSeed(scanner, random);
            
            // Create the Board array
            int numberOfTiles = 9;                                                      // number of tiles
            boolean[] board = newBoard(numberOfTiles);                                  // create the tiles array

            // C. Inner-Loop:
            //     - boolean continuePlaying = ShutTheBox_HelperClass.continuePlaying(board, sumRoll);
            boolean continuePlaying = true;
            while(continuePlaying = true){                                              // <INNER-LOOP>
                // 1. Display the available tiles:
                showBoard(board);                                                       // The available number(s) are: 1 2 4 5 6 7 9 

                // 2. Roll the die/dice: 
                //    -- Roll the 1 die or 2 dice (depending upon status of tiles 7, 8, and 9).
                int dice  = 2;
                int sides = 6;
                
                // checkBoard:
                dice = getDice(scanner, board);                                         // 1 or 2

                int sumRoll = rollDice (dice, sides, random);

                // 3. Continue?: Use the continuePlaying() method
                continuePlaying = ShutTheBox_HelperClass.continuePlaying(board, sumRoll);
                //System.out.println("continuePlaying: " + continuePlaying);            // testing

                // continuePlaying: Continue if continuePlaying is true:
                if (continuePlaying == true) { 
                    // Prompt the user & close the tiles
                    closeTiles(scanner, board);

                    // Check Closed Tiles:
                    boolean isAllClosed =  isAllClosed(board);
                    //System.out.println("isAllClosed: " + isAllClosed);                // testing

                    // Display Game Results: 
                    //      - Print the game results: Win/Lose and the number of points.
                    if(isAllClosed == true) {                                          // <END LOOP> round   
                        // Congratulations, you won!
                        wins++;
                        System.out.println("Congratulations, you won!");
                        
                        // Do you wish to play again? Enter "No" to play again or anything else to quit.
                        playGame = playGame(scanner);
                        System.out.println("testing: playGame: " + playGame);           // testing
                        if(playGame == false){
                            score = getScore(board);
                            // End Game
                            System.out.println("1. Thank you for playing \"Close the Box\"! The total score is " + score + " with " + wins + " win(s) after " + rounds + " round(s).");
                        } // <END LOOP> playAgain = true/false
                        
                    }  // End round                                                    // <END LOOP> round
                } else {
                    // End Game
                    System.out.println("Test: END LOOP: continuePlaying = false");     // testing
                    System.out.println("2. Thank you for playing \"Close the Box\"! The total score is " + score + " with " + wins + " win(s) after " + rounds + " round(s).");
                }
                // end if (continuePlaying == true)
            }   // <End of Inner-Loop> -- while(continuePlaying = true)
        }   // <End Outer Loop> (End playing game #1?)

        // 3. Display Match Results:
        //  - Print the match results: Total score and number of wins.
        showGameResults(score, wins, rounds);

        // close the scanner object
        scanner.close();
        
    } // End: main

    // Method: enter and set the seed
    public static void setSeed (Scanner scanner, Random random) {
        System.out.println("Enter a seed: ");
        String input = scanner.nextLine();
        int seed = 0;
        if (input.matches("-?[1-9]\\d*|0")) {
            seed = Integer.parseInt(input);  
        } else {
            System.out.println("Error! The entry \"" + input + "\" is not an integer.");
            setSeed(scanner, random);
        }
        random.setSeed(seed);
    }

    // Method: Create new board
    public static boolean[] newBoard (int numberOfTiles) {
        // builds the boolean[] tiles array
        boolean[] board = new boolean[numberOfTiles];               // boolean[] tiles

        // set all tiles to true
        for(int i = 0; i < board.length; i++){
            board[i] = true;
        }
        return board;
    }

    // Method: Roll Dice
    public static int rollDice (int dice, int sides, Random random) {
        int[] roll = new int[dice];
        int sumRoll = 0;

        for (int i = 0; i < dice; i++) {
            roll[i] = random.nextInt(sides) + 1;
            sumRoll += roll[i];
        }
        /// display the roll(s)
        if(dice == 1) {
            System.out.println("The die roll is " + roll[0] + ".");
        } else {
            System.out.println("The dice roll is " + roll[0] + " and " + roll[1] + " for a sum of " + sumRoll + ".");
        }
        return sumRoll;
    }

    // Method: Show Tiles
    public static void showBoard (boolean[] board) {
        // Display the available tiles
        System.out.print("\nThe available number(s) are: ");
        // display the available tiles
        for (int i = 1; i <= board.length; i++) {
            if (board[i-1] == true) {
                System.out.print(i + " ");
            }
        }
        System.out.print("\n\n");
    }

    // Method: Close Tiles
    public static void closeTiles (Scanner scanner, boolean[] board) {
        System.out.println("Which tile(s) should be \"closed\"? Separate multiple tiles with a space.");
        int tile = -1;
        String input = scanner.nextLine();
        Scanner in = new Scanner(input);
        while (in.hasNextInt()) {                   /// NEED Error Checking!!!!!!!! i.e "17 nor 1 7
            tile = in.nextInt();
            board[tile-1] = false;
        }
        in.close(); // close the scanner
    }

    // Method: isAllClosed
    public static boolean isAllClosed (boolean[] board) {
        // check if all tiles are closed
        int closedTiles = board.length;
        for (int i = 1; i <= board.length; i++) {
            if (board[i-1] == true) {
                closedTiles--;
            }
        }
        //System.out.println("closedTiles: " + closedTiles);                    // for testing
        boolean isAllClosed = false;
        if (closedTiles == board.length){
            // if all tiles are closed, end game.
            isAllClosed = true;
        } else {
            // if not all tiles are closed, continue game.
            isAllClosed = false;
        }
        return isAllClosed;

        /*
        boolean allClosed = true;
        for (int i = 0; i < tiles.length; i++) {
            if (tiles[i] == true) {
                allClosed = false;
            }
        }
        return allClosed;
        */
    }

    // Method: Show Game Results
    public static void showGameResults (int score, int wins, int rounds) {
        System.out.println("Thank you for playing \"Close the Box\"! The total score is " + score + " with " + wins + " win(s) after " + rounds + " round(s).");
    }

    //Method: Update Score
    public static int getScore (boolean[] board) {
        int score = 0;
        for (int i = 1; i <= board.length; i++) {
            if (board[i-1] == true) {
                score += i;
            }
        }
        return score;
    }

    // Method: Play Again
    public static boolean playGame(Scanner scanner) {
        System.out.println("\nDo you wish to play again? Enter \"No\" " +
        "to play again or anything else to quit.");
        boolean playGame = true;
        String askPlayAgain = scanner.nextLine();
        if (askPlayAgain.toUpperCase().equals("NO")) {
            playGame = false;
        } else {
            playGame = true;
        }
//        System.out.println("testing: playAgain: " + playAgain);                          // testing
        return playGame;
    }

    // Method: Get Dice
    static public int getDice(Scanner scanner, boolean[] board) {
        int dice = 2;
        if(board[6] == false && board[7] == false && board[8] == false){
            // Option: roll 1 die
            System.out.println("The player may opt to roll 1 die or 2 dice " +
                "because tiles 7, 8, and 9 are \"closed\".");
            System.out.println("Enter \"1\" to roll 1 only die or \"2\" " +
                "(or any other key) to roll 2 dice.");

            String input = scanner.nextLine();
            Scanner in = new Scanner(input);
            while (in.hasNextInt()) {
                dice = in.nextInt();
                if(dice == 1){
                    dice  = 1;
                } else {
                    dice  = 2;
                }
            }
        } else {
            dice  = 2;
        }
        return dice;
    }

}